<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <title>Leaflet GPX Example</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.css"/>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.js"></script>
    <script src="https://rawcdn.githack.com/bbecquet/Leaflet.RotatedMarker/master/leaflet.rotatedMarker.js"></script>
    <script>
        window.onerror = function(message, source, lineno, colno, error) {
            console.log("❌ JavaScript Error: " + message + " at " + source + ":" + lineno);
        };
    </script>
    <script>
        function notifyKotlin() {

           if (window.javafx) {
            console.log("✅ Sending message to Kotlin...");
            window.javafx.postMessage("Leaflet Ready");
        } else {
              console.log("⏳ Waiting for Kotlin bridge...");
             setTimeout(notifyKotlin, 500); // Try again after 500ms
       }
       }
       document.addEventListener("DOMContentLoaded", function () {
           console.log("✅ Leaflet is now available!");
            notifyKotlin();
       });
    </script>
    <style>
        #map {
            height: 420px;
        }
    </style>
</head>
<body>
<div id="map"></div>

<script>
    var map = L.map('map', { attributionControl: false }).setView([51.78962, 6.14120], 13);

    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>',
        maxZoom: 18,
        id: 'mapbox.streets'
    }).addTo(map);

    const directionIcon = L.icon({
    iconUrl: 'ic_direction.svg',
    iconSize: [40, 40],
    iconAnchor: [20, 20],
    });

    var marker = L.marker([0, 0], {
    icon: directionIcon,
    rotationAngle: 0,
    rotationOrigin: 'center center'
    }).addTo(map);

    marker.setOpacity(0);

    L.control.attribution({
        position: 'topright'
    }).addTo(map);

    var polyline;


</script>
</body>
</html>